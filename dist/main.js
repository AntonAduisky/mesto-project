(()=>{"use strict";var e=document.querySelector(".elements"),t=document.querySelector("#cardTemplate").content;function n(e,n){var r=t.querySelector(".elements__element").cloneNode(!0),o=r.querySelector(".elements__element-title"),c=r.querySelector(".elements__element-image"),l=r.querySelector(".elements__element-like"),a=r.querySelector(".elements__element-delete");return c.src=n,c.alt=e,o.textContent=e,l.addEventListener("click",(function(e){e.target.classList.toggle("elements__element-like_active")})),a.addEventListener("click",(function(e){e.target.closest(".elements__element").remove()})),c.addEventListener("click",(function(){popupPhoto.src=n,popupPhoto.alt=e,popupFigcaption.textContent=e,openPopup(imagePopup)})),r}function r(t){return e.prepend(t),t}var o=document.querySelector(".edit-form"),c=document.querySelector("#card__name"),l=document.querySelector("#card__image"),a=o.querySelector("#username__title"),i=o.querySelector("#username__activity"),s=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),d=document.querySelector("#profile-popup"),p=document.querySelector("#card-popup"),m=document.querySelector("#card-form"),v=document.querySelector(".profile"),f=v.querySelector(".profile__title"),_=v.querySelector(".profile__subtitle"),y=document.querySelector("#image-popup");y.querySelector(".popup__image-figcaption"),y.querySelector(".popup__image");var S=document.querySelectorAll(".popup__close-button"),q=document.querySelector(".wrapper");function g(e){e.target.classList.contains("popup_opened")&&e.target.classList.remove("popup_opened")}function k(e){27===e.keyCode&&L(document.querySelector(".popup_opened"))}function b(e){e.classList.add("popup_opened"),q.addEventListener("click",g),document.addEventListener("keydown",k)}function L(e){e.classList.remove("popup_opened"),q.removeEventListener("click",g),document.removeEventListener("keydown",k),c.value="",l.value="",a.value="",i.value=""}for(var E=0;E<S.length;E++)S[E].addEventListener("click",(function(e){L(e.target.closest(".popup"))}));var h,C=function(e,t,n){var r=e.querySelector(n.buttonSelector);!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?function(e,t){e.classList.remove(t.buttonDisabledClass),e.disabled=!1}(r,n):function(e,t){e.classList.add(t.buttonDisabledClass),e.disabled=!0}(r,n)};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return r(n(e.name,e.link))})),o.addEventListener("submit",(function(e){e.preventDefault(),f.textContent=a.value,_.textContent=i.value,L("profileButton"===e.target.getAttribute("data-form")?d:p)})),s.addEventListener("click",(function(){b(d)})),u.addEventListener("click",(function(){b(p)})),m.addEventListener("submit",(function(e){e.preventDefault(),r(n(c.value,l.value)),L("cardButton"===e.target.getAttribute("data-form")?p:d)})),h={formSelector:".edit-form",inputSelector:".edit-form__item",errorClass:"error-message_visible",inputInvalidClass:"edit-form__item_invalid",buttonSelector:".edit-form__save-button",buttonDisabledClass:"edit-form__save-button_disabled"},Array.from(document.querySelectorAll(h.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector));n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){var r=e.querySelector("#error-".concat(t.id));t.validity.valid?function(e,t,n){e.classList.remove(n.inputInvalidClass),t.classList.remove(n.errorClass),t.textContent=""}(t,r,n):function(e,t,n,r){e.classList.add(r.inputInvalidClass),t.classList.add(r.errorClass),t.textContent=n}(t,r,t.validationMessage,n)}(e,r,t),C(e,n,t)}))})),C(e,n,t)}(e,h)}))})();