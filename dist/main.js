(()=>{"use strict";var e,t=document.querySelector(".edit-form"),n=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),o=document.querySelectorAll(".popup__close-button"),c=t.querySelector("#username__title"),l=t.querySelector("#username__activity"),s=document.querySelector("#profile-popup"),i=document.querySelector("#card-popup"),a=document.querySelector("#card-form"),u=document.querySelector(".elements"),d=document.querySelector("#card__name"),p=document.querySelector("#card__image"),m=document.querySelector(".profile"),f=m.querySelector(".profile__title"),v=m.querySelector(".profile__subtitle"),_=document.querySelector("#image-popup"),y=_.querySelector(".popup__image-figcaption"),S=_.querySelector(".popup__image"),q=document.querySelector(".wrapper"),g=document.querySelector("#cardTemplate").content,k=function(e,t,n){var r=e.querySelector(n.buttonSelector);!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?function(e,t){e.classList.remove(t.buttonDisabledClass),e.disabled=!1}(r,n):function(e,t){e.classList.add(t.buttonDisabledClass),e.disabled=!0}(r,n)};e={formSelector:".edit-form",inputSelector:".edit-form__item",errorClass:"error-message_visible",inputInvalidClass:"edit-form__item_invalid",buttonSelector:".edit-form__save-button",buttonDisabledClass:"edit-form__save-button_disabled"},Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector));n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){var r=e.querySelector("#error-".concat(t.id));t.validity.valid?function(e,t,n){e.classList.remove(n.inputInvalidClass),t.classList.remove(n.errorClass),t.textContent=""}(t,r,n):function(e,t,n,r){e.classList.add(r.inputInvalidClass),t.classList.add(r.errorClass),t.textContent=n}(t,r,t.validationMessage,n)}(e,r,t),k(e,n,t)}))})),k(e,n,t)}(t,e)})),t.addEventListener("submit",(function(e){e.preventDefault(),f.textContent=c.value,v.textContent=l.value,h("profileButton"===e.target.getAttribute("data-form")?s:i)}));for(var b=0;b<o.length;b++)o[b].addEventListener("click",(function(e){h(e.target.closest(".popup"))}));function L(e){e.target.classList.contains("popup_opened")&&(e.target.classList.remove("popup_opened"),forms.reset())}function E(e){27===e.keyCode&&(h(document.querySelector(".popup_opened")),forms.reset())}function C(e){e.classList.add("popup_opened"),q.addEventListener("click",L),document.addEventListener("keydown",E)}function h(e){e.classList.remove("popup_opened"),q.removeEventListener("click",L),document.removeEventListener("keydown",E)}function x(e,t){var n=g.querySelector(".elements__element").cloneNode(!0),r=n.querySelector(".elements__element-title"),o=n.querySelector(".elements__element-image"),c=n.querySelector(".elements__element-like"),l=n.querySelector(".elements__element-delete");return o.src=t,o.alt=e,r.textContent=e,c.addEventListener("click",(function(e){e.target.classList.toggle("elements__element-like_active")})),l.addEventListener("click",(function(e){e.target.closest(".elements__element").remove()})),o.addEventListener("click",(function(){S.src=t,S.alt=e,y.textContent=e,C(_)})),n}function A(e){return u.prepend(e),e}n.addEventListener("click",(function(){C(s)})),r.addEventListener("click",(function(){C(i)})),a.addEventListener("submit",(function(e){e.preventDefault(),A(x(d.value,p.value)),d.value="",p.value="",c.value="",l.value="",h("cardButton"===e.target.getAttribute("data-form")?i:s)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return A(x(e.name,e.link))}))})();